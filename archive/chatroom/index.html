<!DOCTYPE html>

<html>
<head>

	<title>CryptoChat</title>

	<script src="https://cdn.firebase.com/js/client/1.0.11/firebase.js"></script>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
	<script src="main.js"></script>
	<script src="codemirror.js"></script>
	<script src="javascript.js"></script>
	<link rel="stylesheet" href="codemirror.css">
	<link rel="stylesheet" href="pressstart2p.css">
	<link rel="stylesheet" href="chatroom.css">

	<script type="text/javascript">

	var currentId;
	function setMessageFocus(e) {
		var html = e.innerHTML;
		html = html.replace(/.*\/strong>/g, '');

		document.getElementById('debugInput').value = html;
		//document.getElementById('debugInput').id = e.id;
		currentId = e.id;


		//alert(e.id);
		/*var messageRef = new Firebase("https://encryptedchat.firebaseIO.com").child(e.id);
		messageRef.on('value', function(snapshot){
			var clearText = snapshot.val().text;
			alert(clearText);
			
		});*/

	}

	function showHint(e) {
		var messageRef = new Firebase("https://encryptedchat.firebaseIO.com").child(currentId);
		messageRef.on('value', function(snapshot){
			var clearText = snapshot.val().text.substring(0,3);
			alert('The 1st 3 characters are: ' + clearText);
		});
	}
	</script>
</head>

<body>

<div id="leftCol">
	<div id="messageList"></div>

	<div id="codeWrapper">
		<div id="inputForm"><form>
			> <input type="text" id="nameInput" placeholder="name">:
			<input type="text" id="messageInput" placeholder="message">
			</form>
		</div>
		<textarea id="codeForm" rows="20">function encrypt(str){
	return str;
}</textarea>
	</div>
</div>

<div id="rightCol">
	<div id="decryptForm"><form>
			<input type="text" id="debugInput" placeholder="Message to decrypt">
		</form>
		<p id="clearText">Deciphered Text: </p>
	</div>

	<div id="hintButton" onClick="showHint(this)">I need a Hint...</div>

	<div id="runButton" onclick="onDecrypt()">Decrypt!</div>

	<div id="codeWrapper">
		<textarea id="debugTextArea" rows="20">function decrypt(str){
	return str;
}</textarea>
	</div>
</div>

</body>
</html>
